!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";!function(e){function n(e){i=e,e?o.classList.add("pwp-notification--on"):o.classList.remove("pwp-notification--on")}function t(n,t){var i=new ClientJS,r={browser:{browser:i.getBrowser(),version:i.getBrowserVersion(),major:i.getBrowserMajorVersion()},os:{os:i.getOS(),version:i.getOSVersion()},device:{device:i.getDevice(),type:i.getDeviceType(),vendor:i.getDeviceVendor()}},a=[];Object.keys(r).forEach(function(e){Object.keys(r[e]).forEach(function(n){a.push("clientData["+e+"]["+n+"]="+r[e][n])})});var s=new XMLHttpRequest;s.open("POST",e.AjaxURL,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.onload=function(){o.classList.remove("pwp-notification--loader")},s.send("action=pwp_ajax_handle_device_id&user_id="+n+"&handle="+t+"&"+a.join("&"))}var i=!1,o=document.getElementsByTagName("body")[0],r=function(){o.classList.add("pwp-notification--loader"),navigator.serviceWorker.ready.then(function(i){i.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){t(e.endpoint.split("fcm/send/")[1],"add"),n(!0)}).catch(function(){n(!1),alert(e.message_pushadd_failed)})})},a=function(){o.classList.add("pwp-notification--loader"),navigator.serviceWorker.ready.then(function(i){i.pushManager.getSubscription().then(function(i){i&&i.unsubscribe().then(function(){t(i.endpoint.split("fcm/send/")[1],"remove"),n(!1)}).catch(function(){n(!0),alert(e.message_pushremove_failed)})})})};"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.ready.then(function(e){o.classList.add("pwp-notification");var t=document.getElementById("pwp-notification-button");t&&(t.onclick=function(){i?a():r()}),e.pushManager.getSubscription().then(function(e){e&&n(!0)})}),window.pwpRegisterPushDevice=r,window.pwpDeregisterPushDevice=a}(PwpJsVars)}]);