!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";!function(e){function n(e){o=e,e?i.classList.add("pwp-notification--on"):i.classList.remove("pwp-notification--on")}function t(n,t){var o=new ClientJS,r={browser:{browser:o.getBrowser(),version:o.getBrowserVersion(),major:o.getBrowserMajorVersion()},os:{os:o.getOS(),version:o.getOSVersion()},device:{device:o.getDevice(),type:o.getDeviceType(),vendor:o.getDeviceVendor()}},a=[];Object.keys(r).forEach(function(e){Object.keys(r[e]).forEach(function(n){a.push("clientData["+e+"]["+n+"]="+r[e][n])})});var s=new XMLHttpRequest;s.open("POST",e.AjaxURL,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.onload=function(){i.classList.remove("pwp-notification--loader")},s.send("action=pwp_ajax_handle_device_id&user_id="+n+"&handle="+t+"&"+a.join("&"))}var o=!1,i=document.getElementsByTagName("body")[0],r=function(){i.classList.add("pwp-notification--loader"),navigator.serviceWorker.ready.then(function(o){o.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){var o=e.endpoint.split("fcm/send/")[1];console.log(e),t(o,"add"),n(!0)}).catch(function(){n(!1),alert(e.message_pushadd_failed)})})},a=function(){i.classList.add("pwp-notification--loader"),navigator.serviceWorker.ready.then(function(o){o.pushManager.getSubscription().then(function(o){o&&o.unsubscribe().then(function(){t(o.endpoint.split("fcm/send/")[1],"remove"),n(!1)}).catch(function(){n(!0),alert(e.message_pushremove_failed)})})})};"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.ready.then(function(e){i.classList.add("pwp-notification");var t=document.getElementById("pwp-notification-button");t&&(t.onclick=function(){o?a():r()}),e.pushManager.getSubscription().then(function(e){e&&n(!0)})}),window.pwpRegisterPushDevice=r,window.pwpDeregisterPushDevice=a}(PwpJsVars)}]);